<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>è‡´å¾é¹æ¶›çš„ä¸€å°ä¿¡ Â· ç”µå­ä¿¡å°</title>
  <meta name="description" content="è½»è§¦æ‰“å¼€è¿™å°å†™ç»™ä½ çš„ä¿¡ã€‚">
  <meta name="theme-color" content="#d6336c">
  <meta property="og:title" content="è‡´å¾é¹æ¶›çš„ä¸€å°ä¿¡ Â· ç”µå­ä¿¡å°">
  <meta property="og:description" content="è½»è§¦æ‰“å¼€è¿™å°å†™ç»™ä½ çš„ä¿¡ã€‚">
  <meta property="og:type" content="website">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <style>
    :root{
      --bg:#fff5f7;
      --ink:#2a2a2a;
      --muted:#6b6b6b;
      --rose:#d6336c;
      --rose-2:#ff8fab;
      --edge:#f2dce6;
      --card:#ffffff;
      --shadow:0 10px 30px rgba(0,0,0,.15);
      --radius:14px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#1a1417;
        --ink:#f3e9ed;
        --muted:#c8bfc4;
        --edge:#3a2831;
        --card:#221b1f;
        --shadow:0 10px 30px rgba(0,0,0,.6);
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.65 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue","Noto Sans SC","PingFang SC","Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif;
      color:var(--ink);
      background: radial-gradient(80% 120% at 20% 20%, #ffe3ec, transparent 60%),
                  radial-gradient(80% 120% at 80% 0%, #fff0f6, transparent 60%),
                  var(--bg);
      display:flex; align-items:center; justify-content:center;
      padding: max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(24px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
    }
    .wrap{width:min(920px, 96vw); margin:auto; text-align:center;}
    .title{
      font-weight:700; letter-spacing:.02em;
      margin:0 0 10px; font-size:clamp(20px,3.4vw,28px);
    }
    .subtitle{color:var(--muted); margin:0 0 20px; font-size:.95rem}
    .scene{
      position:relative;
      width:min(680px, 94vw);
      margin: 0 auto 10px;
      perspective:1200px;
    }
    .envelope{
      position:relative; width:100%; height:min(52vh,420px);
      background:var(--card); border:2px solid var(--edge);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      transform: translateZ(0);
      transition: transform .6s cubic-bezier(.2,.8,.2,1), height .6s;
      cursor:pointer;
    }
    .envelope:hover{ transform: translateY(-4px) }
    .flap{
      position:absolute; inset:0 auto auto 0; width:100%; height:58%;
      background: linear-gradient(to bottom, #ffe0ea, var(--card) 70%);
      clip-path: polygon(0 0,100% 0,50% 100%);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform .9s cubic-bezier(.2,.8,.2,1);
      box-shadow: inset 0 -1px 0 rgba(0,0,0,.04);
      z-index:3;
    }
    .seal{
      position:absolute; left:50%; top:42%;
      transform: translate(-50%,-50%);
      width:86px; height:86px; border-radius:50%;
      background: radial-gradient(circle at 38% 35%, #ff6b6b, var(--rose));
      color:#fff; display:grid; place-items:center; 
      font-size:34px; line-height:1;
      box-shadow: 0 10px 22px rgba(214,51,108,.35), inset 0 -5px 8px rgba(0,0,0,.16);
      z-index:4;
    }
    .hint{ color:var(--muted); margin:10px 0 22px; font-size:.95rem; }
    .letter{
      position:absolute; left:6%; right:6%; bottom:8%; top:50%;
      background:var(--card);
      border-radius:12px; padding: 18px 18px 22px;
      box-shadow: 0 8px 24px rgba(0,0,0,.18);
      transform: translateY(70%);
      opacity:0; z-index:2;
      transition: transform .9s .1s cubic-bezier(.2,.8,.2,1), opacity .7s .1s;
      display:flex; flex-direction:column; overflow:auto;
    }
    .letter-header{
      display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px dashed var(--edge);
      padding-bottom:10px; margin-bottom:10px;
    }
    .to{ font-weight:700 }
    .date{ color:var(--muted); font-size:.9rem }
    .content{ text-align:left; }
    .content p{ margin:.6em 0 }
    .actions{ display:flex; gap:10px; margin-top:14px; flex-wrap:wrap; justify-content:flex-end }
    .btn{
      appearance:none; border:1px solid var(--edge);
      background: linear-gradient(#fff, #fff5f8);
      padding:10px 14px; border-radius:10px;
      font-weight:600; letter-spacing:.02em; cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .2s;
    }
    .btn:active{ transform: translateY(1px) }
    .btn.primary{ border-color: transparent; background: linear-gradient(180deg, #ff99bb, var(--rose)); color:#fff; box-shadow: 0 8px 22px rgba(214,51,108,.35) }
    .envelope.open .flap{ transform: rotateX(180deg) }
    .envelope.open .seal{ transform: translate(-50%,-50%) scale(0); transition: transform .5s ease }
    .envelope.open .letter{ transform: translateY(0%); opacity:1 }
    .confetti i{
      position:fixed; top:-10vh;
      width:10px; height:14px; border-radius:2px;
      opacity:.9; pointer-events:none; z-index:5;
      animation: fall 3.6s ease-in forwards;
    }
    @keyframes fall{
      to{ transform: translateY(115vh) rotate(720deg) }
    }
    @media (prefers-reduced-motion: reduce){
      .envelope{ transition:none }
      .flap, .letter{ transition:none }
      .confetti i{ animation:none }
    }
    footer{ color:var(--muted); margin-top:16px; font-size:.85rem }
    .sr-only{ position:absolute!important; width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0 }
  </style>
</head>
<body>
  <div class="wrap">
    <h1 class="title">ğŸ’Œ ç”µå­ä¿¡å°</h1>
    <p class="subtitle">è½»è§¦ä¿¡å°å¼€å¯ï¼Œç»™ <strong>å¾é¹æ¶›</strong> çš„ä¸€å°ä¿¡</p>

    <div class="scene" aria-live="polite">
      <div class="envelope" id="envelope" role="button" aria-expanded="false" aria-label="æ‰“å¼€ä¿¡å°ï¼ˆè½»è§¦ï¼‰">
        <div class="flap"></div>
        <div class="seal" aria-hidden="true">â¤</div>
        <div class="letter" id="letter" tabindex="-1">
          <div class="letter-header">
            <div class="to">äº²çˆ±çš„å¾é¹æ¶›ï¼š</div>
            <div class="date" id="date"></div>
          </div>
          <div class="content" id="content">
            <p>ä»æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¾®ä¿¡èŠå¤©åˆ°ç¬¬ä¸€æ¬¡è§é¢åƒé¥­å†åˆ°ç¬¬ä¸€æ¬¡ä¸€èµ·å»æ—…è¡Œï¼Œæ¯ä¸€æ¬¡çš„â€œç¬¬ä¸€æ¬¡â€å¯¹æˆ‘æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„ä½“éªŒã€‚è¿™ç§ä½“éªŒæ˜¯åŒºåˆ†äºæœ‹å‹çš„åŒºåˆ†äºäº²äººçš„ï¼Œæ˜¯ä¸€ç§ç‹¬ä¸€æ— äºŒçš„ä½“éªŒã€‚</p>
            <p>æ‰€ä»¥æˆ‘ä¸€ç›´æƒ³è¦å°†æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡æŒç»­æ‹“å±•ä¸‹å»ï¼Œç¬¬ä¸€æ¬¡ä¸€èµ·åšé¥­ã€ç¬¬ä¸€æ¬¡ä¸€èµ·å»è¿ªå£«å°¼ã€ç¬¬ä¸€æ¬¡ä¸€èµ·ç©å¯†å®¤ã€ç¬¬ä¸€æ¬¡ä¸€èµ·ä¸€èµ·çœ‹æ—¥å‡ºç„¶ååˆ°ç¬¬ä¸€æ¬¡ä¸€èµ·ä¹°æˆ¿ã€ä¸€èµ·è£…ä¿®æˆ‘ä»¬è‡ªå·±çš„å®¶ï¼Œæˆ‘å°†ä¼šæˆä¸ºè¿™ä¸ªæ—¶é—´ä¸Šæœ€å¹¸ç¦çš„äººã€‚</p>
            <p>åœ¨è®¤è¯†ä½ ä¹‹å‰ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰å…·ä½“ç†æƒ³çš„rï¼Œå¦‚æœæœ‰äººé—®æˆ‘åªä¼šè¯´â€œæˆ‘æƒ³è¦è¿‡ä¸€ä¸ªå¿«ä¹çš„äººç”Ÿâ€ï¼Œä½†ä»€ä¹ˆæ˜¯â€œå¿«ä¹çš„äººç”Ÿâ€ï¼Œæˆ‘æ²¡æœ‰åŠæ³•å…·è±¡çš„å›ç­”è¿™ä¸ªé—®é¢˜ã€‚ä½†è®¤è¯†ä½ ä¹‹åï¼Œæˆ‘çš„ç†æƒ³å°±å˜å¾—éå¸¸å…·è±¡ï¼Œä¹Ÿå°±æ˜¯å’Œçˆ±çš„äººå¹¸ç¦ã€å¹³å‡¡ã€æ— å¿§æ— è™‘çš„è¿‡å®Œè¿™ä¸€ç”Ÿã€‚</p>
            <p>å…³äºä»€ä¹ˆæ˜¯â€œçˆ±â€ï¼Œæˆ‘ä»¥å‰ä¹Ÿä¸å¤ªæ˜ç™½ã€‚ä»ç¬¬ä¸€æ¬¡è§åˆ°ä½ ï¼Œå°±å¯¹ä½ æœ‰å¥½æ„Ÿï¼Œæ˜¯ä¸€ä¸ªç§¯æã€ä¸»åŠ¨ä¸”å¾ˆç¬¦åˆæˆ‘å®¡ç¾çš„ä¸€ä¸ªç”·å­©å­ï¼Œåæ¥å½“åœ¨å®å®¶è¿‡å®Œå‘¨æœ«ä¹‹åï¼Œæˆ‘å†…å¿ƒå®Œå…¨ç¡®è®¤äº†ï¼šä½ å°±æ˜¯æˆ‘å–œæ¬¢çš„äººã€‚</p>
            <p>è®¤è¯†å®ä¹‹åæˆ‘å°±æ˜ç™½äº†ä»€ä¹ˆæ˜¯çˆ±ï¼Œçˆ±æ˜¯æ„¿æ„ä¸ºå¯¹æ–¹ä»˜å‡ºä¸”åˆä¸æ±‚å…·ä½“æ±‡æŠ¥ï¼Œçˆ±æ˜¯å¯ä»¥æŠŠå¯¹æ–¹è§†ä¸ºè‡ªå·±æœ€å®è´µçš„ä¸œè¥¿è€Œçæƒœçš„ï¼Œè€ŒçœŸæ­£çš„çˆ±ä¸”æ˜¯ç›¸äº’çš„ï¼Œä¸¤ä¸ªäººäº’ç›¸å®ˆæŠ¤å½¼æ­¤ã€‚</p>
            <p>äººç”Ÿæ˜¯æœ‰é™çš„ï¼Œä¸ä½ ç›¸é‡ï¼Œæˆ‘å¾ˆå¹¸è¿ã€‚æˆ‘æƒ³å’Œä½ ä¸€èµ·èµ°å®Œæœªæ¥çš„æ—¥å­ï¼Œä¸€èµ·ç»å†äººç”Ÿä¸­æ‰€æœ‰å±äºæˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡ã€‚<br>æˆ‘çˆ±ä½ ï¼Œæ‰€ä»¥æƒ³å’Œä½ æ­£å¼çš„å‘Šç™½ä¸€æ¬¡ï¼Œæ­£å¼çš„é—®ä¸€ä¸‹ä½ â€œæ„¿æ„åšæˆ‘çš„ç”·æœ‹å‹å—â€ã€‚</p>
            <p>çˆ±ä½ çš„éƒ­ä¸­æ–¹</p>
          </div>
          <div class="actions">
            <button class="btn primary" id="btnCopy">å¤åˆ¶å…¨æ–‡</button>
            <button class="btn" id="btnShare">åˆ†äº«æ­¤é¡µé¢</button>
          </div>
        </div>
      </div>
      <p class="hint">å°æç¤ºï¼šç‚¹æŒ‰/è½»è§¦ä¿¡å°å¯æ‰“å¼€ï¼Œæ‰“å¼€åå†æ¬¡ç‚¹æŒ‰ä¿¡å°ç©ºç™½å¤„ä¹Ÿå¯å…³é—­ã€‚</p>
    </div>

    <footer>Â© <span id="year"></span> ä¸“å± Â· åªä¸ºä½ æ‰“å¼€</footer>
  </div>

  <div class="confetti" aria-hidden="true"></div>

  <script>
    // æ—¥æœŸä¸å¹´ä»½æ˜¾ç¤º
    const fmt = new Intl.DateTimeFormat('zh-CN', { year:'numeric', month:'long', day:'numeric'});
    document.getElementById('date').textContent = fmt.format(new Date());
    document.getElementById('year').textContent = new Date().getFullYear();

    const envelope = document.getElementById('envelope');
    const letter = document.getElementById('letter');
    let opened = false;

    function openEnvelope(){
      if(opened) return;
      opened = true;
      envelope.classList.add('open');
      envelope.setAttribute('aria-expanded','true');
      setTimeout(()=> letter.focus({preventScroll:true}), 400);
      burst();
      history.replaceState(null, '', location.pathname + location.search + '#open');
    }
    function closeEnvelope(){
      if(!opened) return;
      opened = false;
      envelope.classList.remove('open');
      envelope.setAttribute('aria-expanded','false');
    }

    envelope.addEventListener('click', (e)=>{
      // if clicked inside the letter card, ignore close
      const rect = letter.getBoundingClientRect();
      const inLetter = e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom;
      if(!opened) openEnvelope();
      else if(!inLetter) closeEnvelope();
    });
    window.addEventListener('keydown', (e)=>{
      if((e.key === 'Enter' || e.key === ' ') && !opened){ e.preventDefault(); openEnvelope(); }
      if(e.key === 'Escape' && opened){ closeEnvelope(); }
    });

    // å¦‚æœ URL å¸¦ #openï¼Œç›´æ¥æ‰“å¼€
    if(location.hash === '#open'){ setTimeout(openEnvelope, 350); }

    // å¤åˆ¶å…¨æ–‡
    document.getElementById('btnCopy').addEventListener('click', async ()=>{
      const text = document.getElementById('content').innerText.trim();
      try{
        await navigator.clipboard.writeText(text);
        toast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
      }catch{
        toast('å¤åˆ¶å¤±è´¥ï¼Œè¯·é•¿æŒ‰é€‰æ‹©æ–‡æœ¬å¤åˆ¶');
      }
    });

    // åˆ†äº«
    document.getElementById('btnShare').addEventListener('click', async ()=>{
      const shareData = { title: document.title, text:'ä¸€å°å†™ç»™ä½ çš„ä¿¡', url: location.href };
      if(navigator.share){
        try{ await navigator.share(shareData); }catch{ /* ç”¨æˆ·å–æ¶ˆ */ }
      }else{
        try{
          await navigator.clipboard.writeText(location.href);
          toast('å·²å¤åˆ¶é“¾æ¥ï¼Œå¯ç›´æ¥ç²˜è´´åˆ†äº«');
        }catch{
          toast('è¯·æ‰‹åŠ¨å¤åˆ¶åœ°å€æ é“¾æ¥');
        }
      }
    });

    // ç®€æ˜“åå¸æç¤º
    function toast(msg){
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.cssText='position:fixed;left:50%;bottom:14vh;transform:translateX(-50%);background:rgba(0,0,0,.75);color:#fff;padding:10px 14px;border-radius:12px;font-weight:600;z-index:9;';
      document.body.appendChild(t);
      setTimeout(()=>{ t.style.transition='opacity .35s'; t.style.opacity='0'; },1400);
      setTimeout(()=> t.remove(), 1800);
    }

    // äº”å½©çº¸å±‘
    function burst(){
      if (matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      const container = document.querySelector('.confetti');
      const colors = ['#ff8fab','#ffc2d1','#fde4cf','#cdb4db','#bde0fe','#a8e6cf','#ffd6a5','#fdffb6'];
      const pieces = 90;
      for(let i=0;i<pieces;i++){
        const el = document.createElement('i');
        const size = 8 + Math.random()*10;
        el.style.width = size+'px';
        el.style.height = (size*1.3)+'px';
        el.style.left = (Math.random()*window.innerWidth)+'px';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.transform = 'rotate('+(Math.random()*360)+'deg)';
        el.style.animationDelay = (Math.random()*0.2)+'s';
        container.appendChild(el);
        setTimeout(()=> el.remove(), 4000);
      }
    }
  </script>
</body>
</html>
